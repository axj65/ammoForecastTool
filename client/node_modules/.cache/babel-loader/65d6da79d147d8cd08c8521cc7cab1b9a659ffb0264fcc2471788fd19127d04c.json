{"ast":null,"code":"import _regeneratorRuntime from\"/Users/albertjoe33/mac_only_docs/inf385t/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/albertjoe33/mac_only_docs/inf385t/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/albertjoe33/mac_only_docs/inf385t/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useLocation}from'react-router-dom';import\"bootstrap/dist/css/bootstrap.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Table(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var location=useLocation();var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),numberToTrain=_useState4[0],setNumberToTrain=_useState4[1];// Default to 1 if not specified\nuseEffect(function(){var query=location.state||{};setNumberToTrain(query.number||1);// Set number to train from query\nif(query.weapon){query.eventType=query.weapon+'.*';}var searchParams=new URLSearchParams(query).toString();var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/table?\".concat(searchParams));case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;setData(result);case 7:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[location]);// This function groups the data by eventType\nvar groupByEventType=function groupByEventType(data){return data.reduce(function(acc,item){var eventType=item.eventType;acc[eventType]=acc[eventType]||[];acc[eventType].push(item);return acc;},{});};// This function calculates the 'x People' row by multiplying each value with numberToTrain\nvar calculateXPeopleRow=function calculateXPeopleRow(detail){return Object.keys(detail).reduce(function(acc,key){acc[key]=key==='ammoType'?detail[key]:detail[key]*numberToTrain;return acc;},{});};var groupedData=groupByEventType(data);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Training Qualification Details\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Event Type:\"}),\" \",location.state.event]}),location.state.weapon&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Weapon Type:\"}),\" \",location.state.weapon]}),location.state.number&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Number to Train:\"}),\" \",location.state.number]}),Object.keys(groupedData).map(function(eventType,index){var eventDataSet=groupedData[eventType];if(eventDataSet.length===0||!eventDataSet[0].data){return null;// or some error component\n}// Headers should exclude 'ammoType' since it's handled separately\nvar headers=Object.keys(eventDataSet[0].data).filter(function(header){return header!=='ammoType'&&header!=='Total';});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:eventType}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ammo Type\"}),headers.map(function(header){return/*#__PURE__*/_jsx(\"th\",{children:header},header);}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),\" \"]})}),/*#__PURE__*/_jsx(\"tbody\",{children:eventDataSet.map(function(item,idx){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Per Person\"}),/*#__PURE__*/_jsx(\"td\",{children:item.ammoType}),headers.map(function(header){return/*#__PURE__*/_jsx(\"td\",{children:item.data[header]},header);}),/*#__PURE__*/_jsx(\"td\",{children:item.data.Total})]},\"per-person-\".concat(idx)),/*#__PURE__*/_jsxs(\"tr\",{className:\"table-info\",children:[/*#__PURE__*/_jsxs(\"td\",{children:[\"x\",numberToTrain,\" People\"]}),/*#__PURE__*/_jsx(\"td\",{children:item.ammoType}),headers.map(function(header){return/*#__PURE__*/_jsx(\"td\",{children:item.data[header]*numberToTrain},header);}),/*#__PURE__*/_jsx(\"td\",{children:item.data.Total*numberToTrain})]},\"x-people-\".concat(idx))]});})})]})]},index);})]});}export default Table;","map":{"version":3,"names":["React","useEffect","useState","useLocation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Table","_useState","_useState2","_slicedToArray","data","setData","location","_useState3","_useState4","numberToTrain","setNumberToTrain","query","state","number","weapon","eventType","searchParams","URLSearchParams","toString","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","result","wrap","_callee$","_context","prev","next","fetch","concat","sent","json","stop","apply","arguments","groupByEventType","reduce","acc","item","push","calculateXPeopleRow","detail","Object","keys","key","groupedData","className","children","event","map","index","eventDataSet","length","headers","filter","header","idx","ammoType","Total"],"sources":["/Users/albertjoe33/mac_only_docs/inf385t/client/src/components/table.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport \"bootstrap/dist/css/bootstrap.css\";\n\nfunction Table() {\n  const [data, setData] = useState([]);\n  const location = useLocation();\n  const [numberToTrain, setNumberToTrain] = useState(1); // Default to 1 if not specified\n\n  useEffect(() => {\n    const query = location.state || {};\n    setNumberToTrain(query.number || 1); // Set number to train from query\n\n    if (query.weapon) {\n      query.eventType = query.weapon + '.*';\n    }\n\n    const searchParams = new URLSearchParams(query).toString();\n\n    const fetchData = async () => {\n      const response = await fetch(`/table?${searchParams}`);\n      const result = await response.json();\n      setData(result);\n    };\n\n    fetchData();\n  }, [location]);\n\n  // This function groups the data by eventType\n  const groupByEventType = (data) => {\n    return data.reduce((acc, item) => {\n      const { eventType } = item;\n      acc[eventType] = acc[eventType] || [];\n      acc[eventType].push(item);\n      return acc;\n    }, {});\n  };\n\n  // This function calculates the 'x People' row by multiplying each value with numberToTrain\n  const calculateXPeopleRow = (detail) => {\n    return Object.keys(detail).reduce((acc, key) => {\n      acc[key] = key === 'ammoType' ? detail[key] : detail[key] * numberToTrain;\n      return acc;\n    }, {});\n  };\n\n  const groupedData = groupByEventType(data);\n\n\n  return (\n    <div className=\"container mt-5\">\n      <h2>Training Qualification Details</h2>\n      <p><strong>Event Type:</strong> {location.state.event}</p>\n      {location.state.weapon && <p><strong>Weapon Type:</strong> {location.state.weapon}</p>}\n      {location.state.number && <p><strong>Number to Train:</strong> {location.state.number}</p>}\n\n      {Object.keys(groupedData).map((eventType, index) => {\n  const eventDataSet = groupedData[eventType];\n\n  if (eventDataSet.length === 0 || !eventDataSet[0].data) {\n    return null; // or some error component\n  }\n\n  // Headers should exclude 'ammoType' since it's handled separately\n  const headers = Object.keys(eventDataSet[0].data).filter(header => header !== 'ammoType' && header !== 'Total');\n\n  return (\n    <div key={index}>\n      <h3>{eventType}</h3>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>Quantity</th>\n            <th>Ammo Type</th>\n            {headers.map(header => (\n              <th key={header}>{header}</th>\n            ))}\n            <th>Total</th> {/* Single Total column header */}\n          </tr>\n        </thead>\n        <tbody>\n          {eventDataSet.map((item, idx) => (\n            <>\n              <tr key={`per-person-${idx}`}>\n                <td>Per Person</td>\n                <td>{item.ammoType}</td>\n                {headers.map(header => (\n                  <td key={header}>{item.data[header]}</td>\n                ))}\n                <td>{item.data.Total}</td>\n              </tr>\n              <tr key={`x-people-${idx}`} className=\"table-info\">\n                <td>x{numberToTrain} People</td>\n                <td>{item.ammoType}</td>\n                {headers.map(header => (\n                  <td key={header}>{item.data[header] * numberToTrain}</td>\n                ))}\n                <td>{item.data.Total * numberToTrain}</td>\n              </tr>\n            </>\n          ))}\n        </tbody>\n      </table>\n    </div>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default Table;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}